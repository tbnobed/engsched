{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="mb-4">Quick Links Management</h1>

    <!-- Add New Quick Link Button -->
    <div class="mb-4">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addQuickLinkModal">
            <i data-feather="plus" class="me-1"></i> Add New Link
        </button>
    </div>



    <!-- Quick Links List -->
    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Order</th>
                            <th>Title</th>
                            <th>Category</th>
                            <th>URL</th>
                            <th>Icon</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="quickLinksTableBody">
                        {% for link in quick_links %}
                        <tr data-id="{{ link.id }}" class="sortable-row">
                            <td>
                                <i data-feather="menu" class="drag-handle me-2"></i>
                                <span>{{ link.order }}</span>
                            </td>
                            <td>{{ link.title }}</td>
                            <td>{{ link.category }}</td>
                            <td class="text-truncate" style="max-width: 200px;">
                                <a href="{{ link.url }}" target="_blank">{{ link.url }}</a>
                            </td>
                            <td><i data-feather="{{ link.icon }}"></i> {{ link.icon }}</td>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary" 
                                        data-bs-toggle="modal" 
                                        data-bs-target="#editQuickLinkModal{{ link.id }}">
                                    <i data-feather="edit-2"></i> Edit
                                </button>
                                <button type="button" class="btn btn-sm btn-danger" 
                                        onclick="deleteQuickLink({{ link.id }})">
                                    <i data-feather="trash-2"></i> Delete
                                </button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Add Quick Link Modal -->
    <div class="modal fade" id="addQuickLinkModal" tabindex="-1" aria-labelledby="addQuickLinkModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addQuickLinkModalLabel">Add New Quick Link</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="POST" action="{{ url_for('admin_create_quick_link') }}">
                        {{ form.hidden_tag() }}
                        <div class="mb-3">
                            {{ form.title.label(class="form-label") }}
                            {{ form.title(class="form-control") }}
                        </div>
                        <div class="mb-3">
                            {{ form.url.label(class="form-label") }}
                            {{ form.url(class="form-control") }}
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Icon</label>
                            <select name="icon" class="form-select" required>
                                <option value="link">ğŸ”— Link</option>
                                <option value="external-link">â†—ï¸ External Link</option>
                                <option value="bookmark">ğŸ”– Bookmark</option>
                                <option value="star">â­ Star</option>
                                <option value="heart">â¤ï¸ Heart</option>
                                <option value="home">ğŸ  Home</option>
                                <option value="globe">ğŸŒ Globe</option>
                                <option value="monitor">ğŸ–¥ï¸ Monitor</option>
                                <option value="smartphone">ğŸ“± Smartphone</option>
                                <option value="tool">ğŸ”§ Tool</option>
                                <option value="settings">âš™ï¸ Settings</option>
                                <option value="database">ğŸ—„ï¸ Database</option>
                                <option value="server">ğŸ–¥ï¸ Server</option>
                                <option value="cloud">â˜ï¸ Cloud</option>
                                <option value="mail">âœ‰ï¸ Mail</option>
                                <option value="message-circle">ğŸ’¬ Message</option>
                                <option value="phone">ğŸ“ Phone</option>
                                <option value="video">ğŸ“¹ Video</option>
                                <option value="camera">ğŸ“· Camera</option>
                                <option value="image">ğŸ–¼ï¸ Image</option>
                                <option value="file">ğŸ“„ File</option>
                                <option value="folder">ğŸ“ Folder</option>
                                <option value="download">â¬‡ï¸ Download</option>
                                <option value="upload">â¬†ï¸ Upload</option>
                                <option value="search">ğŸ” Search</option>
                                <option value="filter">ğŸ—‚ï¸ Filter</option>
                                <option value="calendar">ğŸ“… Calendar</option>
                                <option value="clock">ğŸ• Clock</option>
                                <option value="map-pin">ğŸ“ Map Pin</option>
                                <option value="navigation">ğŸ§­ Navigation</option>
                                <option value="users">ğŸ‘¥ Users</option>
                                <option value="user">ğŸ‘¤ User</option>
                                <option value="user-plus">ğŸ‘¤â• Add User</option>
                                <option value="shield">ğŸ›¡ï¸ Shield</option>
                                <option value="lock">ğŸ”’ Lock</option>
                                <option value="unlock">ğŸ”“ Unlock</option>
                                <option value="key">ğŸ”‘ Key</option>
                                <option value="info">â„¹ï¸ Info</option>
                                <option value="help-circle">â“ Help</option>
                                <option value="alert-circle">âš ï¸ Alert</option>
                                <option value="check-circle">âœ… Check</option>
                                <option value="x-circle">âŒ X Circle</option>
                                <option value="plus">â• Plus</option>
                                <option value="minus">â– Minus</option>
                                <option value="edit">âœï¸ Edit</option>
                                <option value="edit-2">ğŸ“ Edit 2</option>
                                <option value="trash">ğŸ—‘ï¸ Trash</option>
                                <option value="trash-2">ğŸ—‘ï¸ Trash 2</option>
                                <option value="save">ğŸ’¾ Save</option>
                                <option value="copy">ğŸ“‹ Copy</option>
                                <option value="clipboard">ğŸ“‹ Clipboard</option>
                                <option value="scissors">âœ‚ï¸ Scissors</option>
                                <option value="paperclip">ğŸ“ Paperclip</option>
                                <option value="printer">ğŸ–¨ï¸ Printer</option>
                                <option value="wifi">ğŸ“¶ WiFi</option>
                                <option value="wifi-off">ğŸ“¶âŒ WiFi Off</option>
                                <option value="bluetooth">ğŸ”µ Bluetooth</option>
                                <option value="battery">ğŸ”‹ Battery</option>
                                <option value="zap">âš¡ Zap</option>
                                <option value="activity">ğŸ“ˆ Activity</option>
                                <option value="trending-up">ğŸ“ˆ Trending Up</option>
                                <option value="trending-down">ğŸ“‰ Trending Down</option>
                                <option value="bar-chart">ğŸ“Š Bar Chart</option>
                                <option value="pie-chart">ğŸ¥§ Pie Chart</option>
                                <option value="layers">ğŸ—‚ï¸ Layers</option>
                                <option value="package">ğŸ“¦ Package</option>
                                <option value="box">ğŸ“¦ Box</option>
                                <option value="archive">ğŸ“¦ Archive</option>
                                <option value="inbox">ğŸ“¥ Inbox</option>
                                <option value="send">ğŸ“¤ Send</option>
                                <option value="share">ğŸ”— Share</option>
                                <option value="share-2">ğŸ”— Share 2</option>
                                <option value="command">âŒ˜ Command</option>
                                <option value="code">ğŸ’» Code</option>
                                <option value="terminal">ğŸ’» Terminal</option>
                                <option value="cpu">ğŸ–¥ï¸ CPU</option>
                                <option value="hard-drive">ğŸ’¾ Hard Drive</option>
                                <option value="refresh-cw">ğŸ”„ Refresh</option>
                                <option value="rotate-cw">â†» Rotate</option>
                                <option value="maximize">â›¶ Maximize</option>
                                <option value="minimize">â›¶ Minimize</option>
                                <option value="menu">â˜° Menu</option>
                                <option value="more-horizontal">â‹¯ More</option>
                                <option value="more-vertical">â‹® More Vertical</option>
                                <option value="grid">â–¦ Grid</option>
                                <option value="list">ğŸ“ List</option>
                                <option value="layout">ğŸ—‚ï¸ Layout</option>
                                <option value="sidebar">ğŸ—‚ï¸ Sidebar</option>
                                <option value="eye">ğŸ‘ï¸ Eye</option>
                                <option value="eye-off">ğŸ‘ï¸âŒ Eye Off</option>
                                <option value="sun">â˜€ï¸ Sun</option>
                                <option value="moon">ğŸŒ™ Moon</option>
                                <option value="droplet">ğŸ’§ Droplet</option>
                                <option value="umbrella">â˜‚ï¸ Umbrella</option>
                                <option value="thermometer">ğŸŒ¡ï¸ Thermometer</option>
                                <option value="wind">ğŸ’¨ Wind</option>
                                <option value="tv">ğŸ“º TV</option>
                                <option value="radio">ğŸ“» Radio</option>
                                <option value="headphones">ğŸ§ Headphones</option>
                                <option value="speaker">ğŸ”Š Speaker</option>
                                <option value="mic">ğŸ¤ Mic</option>
                                <option value="mic-off">ğŸ¤âŒ Mic Off</option>
                                <option value="volume">ğŸ”Š Volume</option>
                                <option value="volume-1">ğŸ”‰ Volume 1</option>
                                <option value="volume-2">ğŸ”Š Volume 2</option>
                                <option value="volume-x">ğŸ”‡ Volume X</option>
                                <option value="music">ğŸµ Music</option>
                                <option value="play">â–¶ï¸ Play</option>
                                <option value="pause">â¸ï¸ Pause</option>
                                <option value="stop">â¹ï¸ Stop</option>
                                <option value="skip-back">â®ï¸ Skip Back</option>
                                <option value="skip-forward">â­ï¸ Skip Forward</option>
                                <option value="rewind">âª Rewind</option>
                                <option value="fast-forward">â© Fast Forward</option>
                                <option value="shuffle">ğŸ”€ Shuffle</option>
                                <option value="repeat">ğŸ” Repeat</option>
                                <option value="git-branch">ğŸŒ¿ Git Branch</option>
                                <option value="git-commit">ğŸ“ Git Commit</option>
                                <option value="git-merge">ğŸ”— Git Merge</option>
                                <option value="git-pull-request">ğŸ”„ Git Pull Request</option>
                                <option value="github">ğŸ™ GitHub</option>
                                <option value="gitlab">ğŸ¦Š GitLab</option>
                                <option value="target">ğŸ¯ Target</option>
                                <option value="award">ğŸ† Award</option>
                                <option value="flag">ğŸ³ï¸ Flag</option>
                                <option value="tag">ğŸ·ï¸ Tag</option>
                                <option value="anchor">âš“ Anchor</option>
                                <option value="aperture">ğŸ“¸ Aperture</option>
                                <option value="crosshair">ğŸ¯ Crosshair</option>
                                <option value="feather">ğŸª¶ Feather</option>
                                <option value="dollar-sign">ğŸ’² Dollar Sign</option>
                                <option value="percent">ğŸ’¯ Percent</option>
                                <option value="hash">ğŸ”— Hash</option>
                                <option value="at-sign">@ At Sign</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            {{ form.category.label(class="form-label") }}
                            {{ form.category(class="form-control") }}
                        </div>
                        <div class="mb-3">
                            {{ form.order.label(class="form-label") }}
                            {{ form.order(class="form-control", type="number") }}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Add Quick Link</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modals for each quick link -->
    {% for link in quick_links %}
    <div class="modal fade" id="editQuickLinkModal{{ link.id }}" tabindex="-1" aria-labelledby="editQuickLinkModalLabel{{ link.id }}" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editQuickLinkModalLabel{{ link.id }}">Edit Quick Link</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="POST" action="{{ url_for('admin_edit_quick_link', link_id=link.id) }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <div class="mb-3">
                            <label class="form-label">Title</label>
                            <input type="text" name="title" class="form-control" 
                                   value="{{ link.title }}" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">URL</label>
                            <input type="url" name="url" class="form-control" 
                                   value="{{ link.url }}" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Icon</label>
                            <select name="icon" class="form-select" required>
                                <option value="link" {% if link.icon == 'link' %}selected{% endif %}>ğŸ”— Link</option>
                                <option value="external-link" {% if link.icon == 'external-link' %}selected{% endif %}>â†—ï¸ External Link</option>
                                <option value="bookmark" {% if link.icon == 'bookmark' %}selected{% endif %}>ğŸ”– Bookmark</option>
                                <option value="star" {% if link.icon == 'star' %}selected{% endif %}>â­ Star</option>
                                <option value="heart" {% if link.icon == 'heart' %}selected{% endif %}>â¤ï¸ Heart</option>
                                <option value="home" {% if link.icon == 'home' %}selected{% endif %}>ğŸ  Home</option>
                                <option value="globe" {% if link.icon == 'globe' %}selected{% endif %}>ğŸŒ Globe</option>
                                <option value="monitor" {% if link.icon == 'monitor' %}selected{% endif %}>ğŸ–¥ï¸ Monitor</option>
                                <option value="smartphone" {% if link.icon == 'smartphone' %}selected{% endif %}>ğŸ“± Smartphone</option>
                                <option value="tool" {% if link.icon == 'tool' %}selected{% endif %}>ğŸ”§ Tool</option>
                                <option value="settings" {% if link.icon == 'settings' %}selected{% endif %}>âš™ï¸ Settings</option>
                                <option value="database" {% if link.icon == 'database' %}selected{% endif %}>ğŸ—„ï¸ Database</option>
                                <option value="server" {% if link.icon == 'server' %}selected{% endif %}>ğŸ–¥ï¸ Server</option>
                                <option value="cloud" {% if link.icon == 'cloud' %}selected{% endif %}>â˜ï¸ Cloud</option>
                                <option value="mail" {% if link.icon == 'mail' %}selected{% endif %}>âœ‰ï¸ Mail</option>
                                <option value="message-circle" {% if link.icon == 'message-circle' %}selected{% endif %}>ğŸ’¬ Message</option>
                                <option value="phone" {% if link.icon == 'phone' %}selected{% endif %}>ğŸ“ Phone</option>
                                <option value="video" {% if link.icon == 'video' %}selected{% endif %}>ğŸ“¹ Video</option>
                                <option value="camera" {% if link.icon == 'camera' %}selected{% endif %}>ğŸ“· Camera</option>
                                <option value="image" {% if link.icon == 'image' %}selected{% endif %}>ğŸ–¼ï¸ Image</option>
                                <option value="file" {% if link.icon == 'file' %}selected{% endif %}>ğŸ“„ File</option>
                                <option value="folder" {% if link.icon == 'folder' %}selected{% endif %}>ğŸ“ Folder</option>
                                <option value="download" {% if link.icon == 'download' %}selected{% endif %}>â¬‡ï¸ Download</option>
                                <option value="upload" {% if link.icon == 'upload' %}selected{% endif %}>â¬†ï¸ Upload</option>
                                <option value="search" {% if link.icon == 'search' %}selected{% endif %}>ğŸ” Search</option>
                                <option value="filter" {% if link.icon == 'filter' %}selected{% endif %}>ğŸ—‚ï¸ Filter</option>
                                <option value="calendar" {% if link.icon == 'calendar' %}selected{% endif %}>ğŸ“… Calendar</option>
                                <option value="clock" {% if link.icon == 'clock' %}selected{% endif %}>ğŸ• Clock</option>
                                <option value="map-pin" {% if link.icon == 'map-pin' %}selected{% endif %}>ğŸ“ Map Pin</option>
                                <option value="navigation" {% if link.icon == 'navigation' %}selected{% endif %}>ğŸ§­ Navigation</option>
                                <option value="users" {% if link.icon == 'users' %}selected{% endif %}>ğŸ‘¥ Users</option>
                                <option value="user" {% if link.icon == 'user' %}selected{% endif %}>ğŸ‘¤ User</option>
                                <option value="user-plus" {% if link.icon == 'user-plus' %}selected{% endif %}>ğŸ‘¤â• Add User</option>
                                <option value="shield" {% if link.icon == 'shield' %}selected{% endif %}>ğŸ›¡ï¸ Shield</option>
                                <option value="lock" {% if link.icon == 'lock' %}selected{% endif %}>ğŸ”’ Lock</option>
                                <option value="unlock" {% if link.icon == 'unlock' %}selected{% endif %}>ğŸ”“ Unlock</option>
                                <option value="key" {% if link.icon == 'key' %}selected{% endif %}>ğŸ”‘ Key</option>
                                <option value="info" {% if link.icon == 'info' %}selected{% endif %}>â„¹ï¸ Info</option>
                                <option value="help-circle" {% if link.icon == 'help-circle' %}selected{% endif %}>â“ Help</option>
                                <option value="alert-circle" {% if link.icon == 'alert-circle' %}selected{% endif %}>âš ï¸ Alert</option>
                                <option value="check-circle" {% if link.icon == 'check-circle' %}selected{% endif %}>âœ… Check</option>
                                <option value="x-circle" {% if link.icon == 'x-circle' %}selected{% endif %}>âŒ X Circle</option>
                                <option value="plus" {% if link.icon == 'plus' %}selected{% endif %}>â• Plus</option>
                                <option value="minus" {% if link.icon == 'minus' %}selected{% endif %}>â– Minus</option>
                                <option value="edit" {% if link.icon == 'edit' %}selected{% endif %}>âœï¸ Edit</option>
                                <option value="edit-2" {% if link.icon == 'edit-2' %}selected{% endif %}>ğŸ“ Edit 2</option>
                                <option value="trash" {% if link.icon == 'trash' %}selected{% endif %}>ğŸ—‘ï¸ Trash</option>
                                <option value="trash-2" {% if link.icon == 'trash-2' %}selected{% endif %}>ğŸ—‘ï¸ Trash 2</option>
                                <option value="save" {% if link.icon == 'save' %}selected{% endif %}>ğŸ’¾ Save</option>
                                <option value="copy" {% if link.icon == 'copy' %}selected{% endif %}>ğŸ“‹ Copy</option>
                                <option value="clipboard" {% if link.icon == 'clipboard' %}selected{% endif %}>ğŸ“‹ Clipboard</option>
                                <option value="scissors" {% if link.icon == 'scissors' %}selected{% endif %}>âœ‚ï¸ Scissors</option>
                                <option value="paperclip" {% if link.icon == 'paperclip' %}selected{% endif %}>ğŸ“ Paperclip</option>
                                <option value="printer" {% if link.icon == 'printer' %}selected{% endif %}>ğŸ–¨ï¸ Printer</option>
                                <option value="wifi" {% if link.icon == 'wifi' %}selected{% endif %}>ğŸ“¶ WiFi</option>
                                <option value="wifi-off" {% if link.icon == 'wifi-off' %}selected{% endif %}>ğŸ“¶âŒ WiFi Off</option>
                                <option value="bluetooth" {% if link.icon == 'bluetooth' %}selected{% endif %}>ğŸ”µ Bluetooth</option>
                                <option value="battery" {% if link.icon == 'battery' %}selected{% endif %}>ğŸ”‹ Battery</option>
                                <option value="zap" {% if link.icon == 'zap' %}selected{% endif %}>âš¡ Zap</option>
                                <option value="activity" {% if link.icon == 'activity' %}selected{% endif %}>ğŸ“ˆ Activity</option>
                                <option value="trending-up" {% if link.icon == 'trending-up' %}selected{% endif %}>ğŸ“ˆ Trending Up</option>
                                <option value="trending-down" {% if link.icon == 'trending-down' %}selected{% endif %}>ğŸ“‰ Trending Down</option>
                                <option value="bar-chart" {% if link.icon == 'bar-chart' %}selected{% endif %}>ğŸ“Š Bar Chart</option>
                                <option value="pie-chart" {% if link.icon == 'pie-chart' %}selected{% endif %}>ğŸ¥§ Pie Chart</option>
                                <option value="layers" {% if link.icon == 'layers' %}selected{% endif %}>ğŸ—‚ï¸ Layers</option>
                                <option value="package" {% if link.icon == 'package' %}selected{% endif %}>ğŸ“¦ Package</option>
                                <option value="box" {% if link.icon == 'box' %}selected{% endif %}>ğŸ“¦ Box</option>
                                <option value="archive" {% if link.icon == 'archive' %}selected{% endif %}>ğŸ“¦ Archive</option>
                                <option value="inbox" {% if link.icon == 'inbox' %}selected{% endif %}>ğŸ“¥ Inbox</option>
                                <option value="send" {% if link.icon == 'send' %}selected{% endif %}>ğŸ“¤ Send</option>
                                <option value="share" {% if link.icon == 'share' %}selected{% endif %}>ğŸ”— Share</option>
                                <option value="share-2" {% if link.icon == 'share-2' %}selected{% endif %}>ğŸ”— Share 2</option>
                                <option value="command" {% if link.icon == 'command' %}selected{% endif %}>âŒ˜ Command</option>
                                <option value="code" {% if link.icon == 'code' %}selected{% endif %}>ğŸ’» Code</option>
                                <option value="terminal" {% if link.icon == 'terminal' %}selected{% endif %}>ğŸ’» Terminal</option>
                                <option value="cpu" {% if link.icon == 'cpu' %}selected{% endif %}>ğŸ–¥ï¸ CPU</option>
                                <option value="hard-drive" {% if link.icon == 'hard-drive' %}selected{% endif %}>ğŸ’¾ Hard Drive</option>
                                <option value="refresh-cw" {% if link.icon == 'refresh-cw' %}selected{% endif %}>ğŸ”„ Refresh</option>
                                <option value="rotate-cw" {% if link.icon == 'rotate-cw' %}selected{% endif %}>â†» Rotate</option>
                                <option value="maximize" {% if link.icon == 'maximize' %}selected{% endif %}>â›¶ Maximize</option>
                                <option value="minimize" {% if link.icon == 'minimize' %}selected{% endif %}>â›¶ Minimize</option>
                                <option value="menu" {% if link.icon == 'menu' %}selected{% endif %}>â˜° Menu</option>
                                <option value="more-horizontal" {% if link.icon == 'more-horizontal' %}selected{% endif %}>â‹¯ More</option>
                                <option value="more-vertical" {% if link.icon == 'more-vertical' %}selected{% endif %}>â‹® More Vertical</option>
                                <option value="grid" {% if link.icon == 'grid' %}selected{% endif %}>â–¦ Grid</option>
                                <option value="list" {% if link.icon == 'list' %}selected{% endif %}>ğŸ“ List</option>
                                <option value="layout" {% if link.icon == 'layout' %}selected{% endif %}>ğŸ—‚ï¸ Layout</option>
                                <option value="sidebar" {% if link.icon == 'sidebar' %}selected{% endif %}>ğŸ—‚ï¸ Sidebar</option>
                                <option value="eye" {% if link.icon == 'eye' %}selected{% endif %}>ğŸ‘ï¸ Eye</option>
                                <option value="eye-off" {% if link.icon == 'eye-off' %}selected{% endif %}>ğŸ‘ï¸âŒ Eye Off</option>
                                <option value="sun" {% if link.icon == 'sun' %}selected{% endif %}>â˜€ï¸ Sun</option>
                                <option value="moon" {% if link.icon == 'moon' %}selected{% endif %}>ğŸŒ™ Moon</option>
                                <option value="droplet" {% if link.icon == 'droplet' %}selected{% endif %}>ğŸ’§ Droplet</option>
                                <option value="umbrella" {% if link.icon == 'umbrella' %}selected{% endif %}>â˜‚ï¸ Umbrella</option>
                                <option value="thermometer" {% if link.icon == 'thermometer' %}selected{% endif %}>ğŸŒ¡ï¸ Thermometer</option>
                                <option value="wind" {% if link.icon == 'wind' %}selected{% endif %}>ğŸ’¨ Wind</option>
                                <option value="tv" {% if link.icon == 'tv' %}selected{% endif %}>ğŸ“º TV</option>
                                <option value="radio" {% if link.icon == 'radio' %}selected{% endif %}>ğŸ“» Radio</option>
                                <option value="headphones" {% if link.icon == 'headphones' %}selected{% endif %}>ğŸ§ Headphones</option>
                                <option value="speaker" {% if link.icon == 'speaker' %}selected{% endif %}>ğŸ”Š Speaker</option>
                                <option value="mic" {% if link.icon == 'mic' %}selected{% endif %}>ğŸ¤ Mic</option>
                                <option value="mic-off" {% if link.icon == 'mic-off' %}selected{% endif %}>ğŸ¤âŒ Mic Off</option>
                                <option value="volume" {% if link.icon == 'volume' %}selected{% endif %}>ğŸ”Š Volume</option>
                                <option value="volume-1" {% if link.icon == 'volume-1' %}selected{% endif %}>ğŸ”‰ Volume 1</option>
                                <option value="volume-2" {% if link.icon == 'volume-2' %}selected{% endif %}>ğŸ”Š Volume 2</option>
                                <option value="volume-x" {% if link.icon == 'volume-x' %}selected{% endif %}>ğŸ”‡ Volume X</option>
                                <option value="music" {% if link.icon == 'music' %}selected{% endif %}>ğŸµ Music</option>
                                <option value="play" {% if link.icon == 'play' %}selected{% endif %}>â–¶ï¸ Play</option>
                                <option value="pause" {% if link.icon == 'pause' %}selected{% endif %}>â¸ï¸ Pause</option>
                                <option value="stop" {% if link.icon == 'stop' %}selected{% endif %}>â¹ï¸ Stop</option>
                                <option value="skip-back" {% if link.icon == 'skip-back' %}selected{% endif %}>â®ï¸ Skip Back</option>
                                <option value="skip-forward" {% if link.icon == 'skip-forward' %}selected{% endif %}>â­ï¸ Skip Forward</option>
                                <option value="rewind" {% if link.icon == 'rewind' %}selected{% endif %}>âª Rewind</option>
                                <option value="fast-forward" {% if link.icon == 'fast-forward' %}selected{% endif %}>â© Fast Forward</option>
                                <option value="shuffle" {% if link.icon == 'shuffle' %}selected{% endif %}>ğŸ”€ Shuffle</option>
                                <option value="repeat" {% if link.icon == 'repeat' %}selected{% endif %}>ğŸ” Repeat</option>
                                <option value="git-branch" {% if link.icon == 'git-branch' %}selected{% endif %}>ğŸŒ¿ Git Branch</option>
                                <option value="git-commit" {% if link.icon == 'git-commit' %}selected{% endif %}>ğŸ“ Git Commit</option>
                                <option value="git-merge" {% if link.icon == 'git-merge' %}selected{% endif %}>ğŸ”— Git Merge</option>
                                <option value="git-pull-request" {% if link.icon == 'git-pull-request' %}selected{% endif %}>ğŸ”„ Git Pull Request</option>
                                <option value="github" {% if link.icon == 'github' %}selected{% endif %}>ğŸ™ GitHub</option>
                                <option value="gitlab" {% if link.icon == 'gitlab' %}selected{% endif %}>ğŸ¦Š GitLab</option>
                                <option value="target" {% if link.icon == 'target' %}selected{% endif %}>ğŸ¯ Target</option>
                                <option value="award" {% if link.icon == 'award' %}selected{% endif %}>ğŸ† Award</option>
                                <option value="flag" {% if link.icon == 'flag' %}selected{% endif %}>ğŸ³ï¸ Flag</option>
                                <option value="tag" {% if link.icon == 'tag' %}selected{% endif %}>ğŸ·ï¸ Tag</option>
                                <option value="anchor" {% if link.icon == 'anchor' %}selected{% endif %}>âš“ Anchor</option>
                                <option value="aperture" {% if link.icon == 'aperture' %}selected{% endif %}>ğŸ“¸ Aperture</option>
                                <option value="crosshair" {% if link.icon == 'crosshair' %}selected{% endif %}>ğŸ¯ Crosshair</option>
                                <option value="feather" {% if link.icon == 'feather' %}selected{% endif %}>ğŸª¶ Feather</option>
                                <option value="dollar-sign" {% if link.icon == 'dollar-sign' %}selected{% endif %}>ğŸ’² Dollar Sign</option>
                                <option value="percent" {% if link.icon == 'percent' %}selected{% endif %}>ğŸ’¯ Percent</option>
                                <option value="hash" {% if link.icon == 'hash' %}selected{% endif %}>ğŸ”— Hash</option>
                                <option value="at-sign" {% if link.icon == 'at-sign' %}selected{% endif %}>@ At Sign</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Category</label>
                            <input type="text" name="category" class="form-control" 
                                   value="{{ link.category }}" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Order</label>
                            <input type="number" name="order" class="form-control" 
                                   value="{{ link.order }}">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}


</div>

<!-- Add Sortable.js for drag-and-drop reordering -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

<script>
// Initialize Sortable
document.addEventListener('DOMContentLoaded', function() {
    var el = document.getElementById('quickLinksTableBody');
    var sortable = new Sortable(el, {
        handle: '.drag-handle',
        animation: 150,
        onEnd: function(evt) {
            const rows = document.querySelectorAll('#quickLinksTableBody tr');
            const newOrder = Array.from(rows).map((row, index) => ({
                id: row.dataset.id,
                order: index
            }));

            // Send the new order to the server
            fetch('/admin/quick_links/reorder', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': document.querySelector('input[name="csrf_token"]').value
                },
                body: JSON.stringify(newOrder)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update the displayed order numbers
                    rows.forEach((row, index) => {
                        row.querySelector('td:first-child span').textContent = index;
                    });
                } else {
                    console.error('Failed to update order');
                }
            });
        }
    });
});

function deleteQuickLink(linkId) {
    if (confirm('Are you sure you want to delete this quick link? This action cannot be undone.')) {
        window.location.href = `/admin/quick_links/delete/${linkId}`;
    }
}
</script>
{% endblock %}